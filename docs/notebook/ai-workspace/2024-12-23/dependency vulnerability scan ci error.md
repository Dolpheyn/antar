# Dependency Vulnerability Scan CI Error

## Problem
- Multiple issues in dependency scanning workflow
- Incorrect configuration for Node.js and dependency management

## Root Causes
1. Incorrect Node.js cache path
2. NPM audit configuration
3. Snyk scan limitations

## Proposed Solutions

### 1. Node.js Cache Configuration
Update GitHub Actions workflow to correctly set cache path:
```yaml
- name: Set up Node.js
  uses: actions/setup-node@v4
  with:
    node-version: 'lts/*'
    cache: 'npm'
    cache-path: './frontend'  # Specify correct frontend path
```

### 2. NPM Audit Improvement
Modify NPM audit to fail on high-severity vulnerabilities:
```yaml
- name: NPM Audit
  working-directory: ./frontend
  run: |
    npm audit --audit-level=high
```

### 3. Snyk Scan Configuration
Update Snyk scan to cover entire project:
```yaml
- name: Snyk Vulnerability Scan
  uses: snyk/actions/node@master
  env:
    SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
  with:
    command: test
    args: --all-projects --severity-threshold=high
```

## Verification Steps
- Update GitHub Actions workflow
- Ensure correct cache and dependency management
- Review and address any reported vulnerabilities

## Potential Impacts
- More robust dependency scanning
- Early detection of security vulnerabilities
- Improved project security posture

## Recommended Actions
- Review and update CI workflow
- Implement comprehensive vulnerability scanning
- Regularly update and audit dependencies

## Error log:
```
Run poetry install --no-interaction --no-root
Creating virtualenv antar in /__w/antar/antar/.venv
Installing dependencies from lock file

pyproject.toml changed significantly since poetry.lock was last generated. Run `poetry lock [--no-update]` to fix the lock file.
Error: Process completed with exit code 1.
```